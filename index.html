<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOG TV</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Encabezado y men√∫ -->
    <header>
      <!-- Bot√≥n del men√∫ con imagen -->
      <div id="menu-toggle" class="menu-toggle" onclick="toggleMenu()">
        <img src="img/menu.png" alt="Men√∫" style="width: 30px; height: 30px" />
      </div>

      <h1>DRAMAS TV</h1>
      <div id="search-toggle" class="search-toggle">üîç</div>
    </header>

    <nav id="menu" class="hidden">
      <ul>
        <li>
          <a
            href="POLITICAS/politica_es.html"
            target="_blank"
            id="link-politica"
            >POLITICAS Y PRIVASIDAD</a
          >
        </li>
        <li><button id="btn-acerca">INFORMACION DE USO</button></li>
        <li><button id="btn-favoritos">MIS FAVORITOS</button></li>
        <li><button id="btn-pedir-drama">PEDIR UN DRAMA</button></li>
      </ul>
    </nav>
    <!-- Carrusel de emisi√≥n destacado -->
    <section id="destacado-emision">
      <div id="carrusel-destacado" class="carrusel-destacado">
        <!-- Imagen de fondo -->
        <img id="carrusel-img" src="" alt="Destacado" />

        <!-- Informaci√≥n destacada encima -->
        <div class="info-destacado">
          <div class="info-flex">
            <div class="info-texto">
              <div class="info-img-derecha">
                <img
                  id="carrusel-img-derecha"
                  src=""
                  alt="Miniatura destacada"
                />
              </div>
              <h2 id="carrusel-titulo">T√≠tulo</h2>
              <div class="tags">
                <span id="carrusel-ano" class="tag">2025</span>
                <span id="carrusel-audio" class="tag">Latino</span>
              </div>
              <p id="carrusel-descripcion">Descripci√≥n</p>
              <div class="botones">
                <button id="btn-ver" class="btn-play">‚ñ∂ REPRODUCIR</button>
                <button id="btn-lista-carrusel" class="btn-lista">
                  <span class="corazon-icon">‚ô°</span>
                  <span class="texto-favorito">FAVORITOS</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Secci√≥n de b√∫squeda -->
    <section id="busqueda" class="hidden">
      <input
        type="text"
        id="buscador"
        placeholder="Buscar pel√≠culas o series..."
      />
      <h2>Resultados de b√∫squeda</h2>
      <div id="busqueda-resultados"></div>
    </section>

    <!-- Secci√≥n Acerca de -->
    <section id="acerca-de" class="hidden">
      <button id="btn-volver-acerca">Volver</button>
      <div class="acerca-contenido">
        <h1>Acerca de DOG TV</h1>

        <div class="descripcion-general">
          <p>
            DOG TV es tu plataforma de streaming favorita donde puedes disfrutar
            de una amplia variedad de contenido audiovisual. Nuestra plataforma
            est√° dise√±ada para ofrecerte la mejor experiencia de entretenimiento
            con dramas asi√°ticos, pel√≠culas y series de alta calidad.
          </p>
        </div>

        <div class="contenido-info">
          <h2>¬øQu√© contenido encontrar√°s?</h2>
          <p>En DOG TV tenemos una extensa biblioteca que incluye:</p>
          <ul>
            <li>
              <strong>Dramas:</strong> Series asi√°ticas de diferentes g√©neros
              (romance, acci√≥n, comedia, thriller)
            </li>
            <li>
              <strong>Pel√≠culas:</strong> Una selecci√≥n curada de pel√≠culas de
              diversos pa√≠ses y g√©neros
            </li>
            <li>
              <strong>Contenido en emisi√≥n:</strong> Los √∫ltimos estrenos y
              series m√°s populares del momento
            </li>
          </ul>
        </div>

        <div class="como-funciona">
          <h2>¬øC√≥mo funciona DOG TV?</h2>
          <p>
            Nuestra plataforma es intuitiva y f√°cil de usar. Simplemente navega
            por las diferentes categor√≠as, selecciona el contenido que te
            interese y disfruta. Todo nuestro contenido est√° disponible con
            audio latino y subt√≠tulos para tu comodidad.
          </p>
        </div>

        <div class="guia-uso">
          <h2>Gu√≠a B√°sica de Uso</h2>
          <div class="acordeon">
            <div class="acordeon-item">
              <button class="acordeon-header">
                ¬øC√≥mo navegar por la plataforma?
              </button>
              <div class="acordeon-content">
                <p>
                  Utiliza el men√∫ hamburguesa (‚ò∞) en la esquina superior
                  izquierda para acceder a las opciones principales. En la
                  pantalla principal encontrar√°s el carrusel de contenido
                  destacado y las secciones de Dramas y Pel√≠culas. Puedes
                  desplazarte horizontalmente en cada secci√≥n para ver m√°s
                  contenido.
                </p>
              </div>
            </div>

            <div class="acordeon-item">
              <button class="acordeon-header">
                ¬øC√≥mo buscar contenido espec√≠fico?
              </button>
              <div class="acordeon-content">
                <p>
                  Haz clic en el √≠cono de b√∫squeda (üîç) en la esquina superior
                  derecha. Escribe el nombre de la serie, pel√≠cula o g√©nero que
                  buscas. Los resultados aparecer√°n autom√°ticamente mientras
                  escribes.
                </p>
              </div>
            </div>

            <div class="acordeon-item">
              <button class="acordeon-header">
                ¬øC√≥mo ver informaci√≥n detallada de una serie o pel√≠cula?
              </button>
              <div class="acordeon-content">
                <p>
                  Haz clic en cualquier imagen de contenido para acceder a la
                  p√°gina de detalles. Ah√≠ encontrar√°s la sinopsis completa, a√±o
                  de lanzamiento, g√©nero, actores principales y la lista de
                  cap√≠tulos disponibles.
                </p>
              </div>
            </div>

            <div class="acordeon-item">
              <button class="acordeon-header">
                ¬øC√≥mo reproducir un cap√≠tulo o pel√≠cula?
              </button>
              <div class="acordeon-content">
                <p>
                  Una vez en la p√°gina de detalles, ver√°s botones para cada
                  cap√≠tulo disponible. Haz clic en el cap√≠tulo que deseas ver y
                  el reproductor se abrir√° autom√°ticamente. Para las pel√≠culas,
                  simplemente haz clic en "REPRODUCIR".
                </p>
              </div>
            </div>

            <div class="acordeon-item">
              <button class="acordeon-header">
                ¬øQu√© significa el carrusel destacado?
              </button>
              <div class="acordeon-content">
                <p>
                  El carrusel en la parte superior muestra autom√°ticamente el
                  contenido m√°s reciente y popular que est√° "en emisi√≥n". Cambia
                  cada pocos segundos para mostrarte diferentes opciones. Puedes
                  hacer clic en "REPRODUCIR" para ir directamente al contenido.
                </p>
              </div>
            </div>

            <div class="acordeon-item">
              <button class="acordeon-header">
                ¬øC√≥mo obtener una vista previa del contenido?
              </button>
              <div class="acordeon-content">
                <p>
                  Mant√©n presionado cualquier imagen de contenido durante unos
                  segundos para ver una vista previa r√°pida con informaci√≥n
                  b√°sica. Esto te permite conocer m√°s sobre el contenido sin
                  salir de la p√°gina principal.
                </p>
              </div>
            </div>

            <div class="acordeon-item">
              <button class="acordeon-header">
                ¬øC√≥mo volver a la p√°gina principal?
              </button>
              <div class="acordeon-content">
                <p>
                  En cualquier momento puedes hacer clic en el bot√≥n "Volver"
                  que aparece en las p√°ginas de detalle o reproductor. Tambi√©n
                  puedes hacer clic en el logo "DOG TV" en la parte superior
                  para regresar al inicio.
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="footer-acerca">
          <p>
            <strong
              >¬°Disfruta de todo nuestro contenido y gracias por elegir DOG
              TV!</strong
            >
          </p>
        </div>
      </div>
    </section>

    <!-- Secci√≥n de Favoritos -->
    <section id="favoritos" class="hidden">
      <button id="btn-volver-favoritos">Volver</button>
      <div class="favoritos-contenido">
        <h1>Mis Favoritos</h1>
        <div id="favoritos-lista" class="favoritos-grid">
          <div class="favoritos-vacio">
            <h3>No tienes favoritos a√∫n</h3>
            <p>Agrega contenido a tu lista de favoritos para verlo aqu√≠</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Listas de contenido -->
    <main id="listas-contenido">
      <section>
        <h2>Series y Dramas Coreanos</h2>
        <div class="contenedor-scroll">
          <div id="dramas"></div>
          <div class="scroll-control">
            <div class="scroll-track">
              <div class="scroll-thumb" data-target="dramas"></div>
            </div>
          </div>
        </div>
      </section>
      <section>
        <h2>Pel√≠culas Coreanas</h2>
        <div class="contenedor-scroll">
          <div id="peliculas"></div>
          <div class="scroll-control">
            <div class="scroll-track">
              <div class="scroll-thumb" data-target="peliculas"></div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Vista de detalle -->
    <section id="detalle" class="hidden">
      <button id="btn-volver">Volver</button>
      <div class="detalle-header">
        <img id="detalle-img" alt="Imagen" />
        <button id="btn-favorito-detalle" class="btn-favorito-detalle">
          <span class="corazon-icon">‚ô°</span>
        </button>
      </div>
      <h2 id="detalle-titulo"></h2>
      <div
        style="
          max-height: 100px;
          overflow-y: auto;
          background: #1a1a1a;
          padding: 10px;
          border-radius: 5px;
        "
      >
        <p id="detalle-descripcion"></p>
      </div>
      <p><strong>A√±o:</strong> <span id="detalle-ano"></span></p>
      <p><strong>G√©nero:</strong> <span id="detalle-genero"></span></p>
      <p><strong>Audio:</strong> <span id="detalle-audio"></span></p>
      <p><strong>Actores:</strong> <span id="detalle-actors"></span></p>
      <div id="capitulos-lista"></div>
      <button
        id="btn-chat"
        style="
          background: #ff0000; 
          border: none;
          color: black;
          padding: 10px 20px;
          border-radius: 8px;
          font-weight: bold;
          margin-top: 15px;
          cursor: pointer;
          display: block;
          width: 100%;
          max-width: 300px;
          margin-left: auto;
          margin-right: auto;
        "
      >
        Chat
      </button>
    </section>

    <!-- Reproductor de video -->
    <section id="video-player" class="hidden">
      <video
        id="video"
        controls
        controlsList="nodownload"
        oncontextmenu="return false"
        preload="metadata"
        width="100%"
      ></video>
      <button
        id="btn-fullscreen"
        style="
          background: #ff0000;
          border: none;
          color: #000;
          padding: 8px 16px;
          border-radius: 8px;
          font-weight: bold;
          cursor: pointer;
          margin-top: 10px;
          display: block;
          margin-left: auto;
          margin-right: auto;
        "
      >
        Pantalla completa
      </button>
    </section>

    <!-- Modal emergente de vista previa -->
    <div id="preview-modal" class="hidden">
      <div class="modal-content">
        <button id="modal-cerrar" class="cerrar-modal">‚úï</button>
        <img id="preview-img" src="" alt="Preview" />
        <div class="modal-text">
          <h3 id="preview-title"></h3>
          <p id="preview-descripcion"></p>
        </div>
      </div>
    </div>

    <!-- Modal de Chat -->
    <div id="chat-modal" class="hidden">
      <div class="chat-container">
        <button class="cerrar-chat" id="cerrar-chat">‚úï</button>

        <!-- Login si no est√° autenticado -->
        <div id="chat-login" class="chat-login">
          <h3>Iniciar sesi√≥n</h3>
          <input
            type="text"
            id="chat-usuario"
            placeholder="Nombre de usuario"
          />
          <input type="password" id="chat-clave" placeholder="Contrase√±a" />
          <button id="chat-login-btn">Entrar</button>
          <p
            id="chat-login-error"
            style="color: crimson; font-size: 14px; display: none"
          >
            Error de autenticaci√≥n
          </p>
        </div>

        <!-- Chat en tiempo real -->
        <div id="chat-area" class="hidden">
          <div id="chat-mensajes" class="chat-mensajes"></div>
          <form id="chat-form">
            <input
              type="text"
              id="chat-texto"
              placeholder="Escribe un mensaje..."
              required
            />
            <button type="submit">Enviar</button>
          </form>
        </div>
      </div>
    </div>

    <!-- Modal de Advertencia por Lenguaje Ofensivo -->
    <div
      id="modal-advertencia"
      class="hidden"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 99999;
      "
    >
      <div
        style="
          background: #1a1a1a;
          color: white;
          padding: 20px;
          border-radius: 15px;
          max-width: 350px;
          width: 90%;
          box-shadow: 0 0 20px crimson;
          text-align: center;
          position: relative;
        "
      >
        <h3 style="color: #ff0606">‚ö†Ô∏è Advertencia</h3>
        <p>Se ha detectado el uso de lenguaje ofensivo.</p>
        <p>
          Por favor evita este tipo de palabras para mantener un ambiente sano
          en la comunidad.
        </p>
        <p id="estado-corazones" style="font-size: 24px; margin: 10px 0">
          ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è
        </p>
        <button
          id="cerrar-modal-advertencia"
          style="
            margin-top: 10px;
            background: #ff0000;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
          "
        >
          Entendido
        </button>
      </div>
    </div>

    <!-- Modal de Usuario Bloqueado -->
    <div
      id="modal-bloqueo"
      class="hidden"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.85);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 99999;
      "
    >
      <div
        style="
          background: #1a1a1a;
          color: white;
          padding: 20px;
          border-radius: 15px;
          max-width: 380px;
          width: 95%;
          box-shadow: 0 0 20px red;
          overflow-y: auto;
          max-height: 90vh;
          text-align: center;
          position: relative;
        "
      >
        <h3 style="color: red">üö´ Acceso Bloqueado</h3>
        <p>
          Tu cuenta ha sido bloqueada por uso repetido de lenguaje ofensivo.
        </p>
        <p style="font-size: 18px; margin: 10px 0">Motivo de suspensi√≥n:</p>
        <div
          id="historial-bloqueo"
          style="
            background: #2a2a2a;
            border-radius: 10px;
            padding: 10px;
            font-size: 13px;
            text-align: left;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid crimson;
          "
        >
          <!-- Aqu√≠ se cargar√° el historial desde JavaScript -->
        </div>
        <button
          id="cerrar-modal-bloqueo"
          style="
            margin-top: 15px;
            background: crimson;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            color: white;
          "
        >
          Cerrar
        </button>
      </div>
    </div>
    <!-- aqu√≠ ba modal bloqueado -->
    <div id="modal-bloqueo" class="hidden">
      <div>
        <h3>üö´ Acceso Bloqueado</h3>
        <div id="historial-bloqueo"></div>
        <button id="cerrar-modal-bloqueo">Cerrar</button>
      </div>
    </div>

    <!-- Modal de Reporte de Mensaje -->
    <div
      id="modal-reporte"
      class="hidden"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.85);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 99999;
      "
    >
      <div
        style="
          background: #1a1a1a;
          color: white;
          padding: 20px;
          border-radius: 15px;
          max-width: 400px;
          width: 95%;
          box-shadow: 0 0 20px crimson;
          text-align: left;
        "
      >
        <h3 style="margin-top: 0">üö© Reportar mensaje</h3>
        <p
          id="mensaje-reportado"
          style="
            font-size: 14px;
            background: #2a2a2a;
            padding: 10px;
            border-radius: 10px;
          "
        ></p>

        <label
          ><input
            type="radio"
            name="motivo-reporte"
            value="Lenguaje ofensivo"
          />
          Lenguaje ofensivo</label
        ><br />
        <label
          ><input type="radio" name="motivo-reporte" value="Spam" /> Spam</label
        ><br />
        <label
          ><input type="radio" name="motivo-reporte" value="Fuera de tema" />
          Fuera de tema</label
        ><br />
        <label
          ><input type="radio" name="motivo-reporte" value="Otro" /> Otro</label
        >

        <textarea
          id="comentario-reporte"
          placeholder="Comentario adicional (opcional)"
          style="
            width: 100%;
            margin-top: 10px;
            padding: 8px;
            border-radius: 10px;
            background: #2a2a2a;
            border: 1px solid #444;
            color: white;
          "
        ></textarea>

        <div style="margin-top: 15px; text-align: right">
          <button
            id="cancelar-reporte"
            style="
              margin-right: 10px;
              background: #555;
              color: white;
              border: none;
              padding: 8px 15px;
              border-radius: 8px;
              cursor: pointer;
            "
          >
            Cancelar
          </button>
          <button
            id="enviar-reporte"
            style="
              background: crimson;
              color: white;
              border: none;
              padding: 8px 15px;
              border-radius: 8px;
              cursor: pointer;
            "
          >
            Enviar
          </button>
        </div>
      </div>
    </div>

    <!-- Modal de Confirmaci√≥n de Reporte -->
    <div id="modal-gracias-reporte" class="modal-overlay hidden">
      <div class="modal-gracias-contenido">
        <h3>‚úÖ ¬°Gracias <span id="usuario-gracias"></span>!</h3>
        <p>
          ADMINISTRADOR <strong>DoogTV</strong> agradece tu ayuda para mantener
          una comunidad sana y respetuosa.
        </p>
        <button id="cerrar-modal-gracias" class="boton-cerrar-gracias">
          Cerrar
        </button>
      </div>
    </div>
    <script>
      function toggleMenu() {
        const menu = document.getElementById("menu"); // Asume que tu men√∫ tiene id="menu"
        if (menu) {
          menu.classList.toggle("visible"); // Alterna la clase visible
        }
      }
    </script>

    <!-- Script principal -->
    <script>
      // Funci√≥n para inicializar los controles de scroll personalizados
      function initScrollControls() {
        const scrollThumbs = document.querySelectorAll(".scroll-thumb");

        scrollThumbs.forEach((thumb) => {
          const targetId = thumb.dataset.target;
          const scrollContainer = document.getElementById(targetId);
          const scrollTrack = thumb.parentElement;

          if (!scrollContainer) return;

          let isDragging = false;
          let startX = 0;
          let scrollLeft = 0;

          // Actualizar posici√≥n del thumb basado en el scroll del contenedor
          function updateThumbPosition() {
            const maxScroll =
              scrollContainer.scrollWidth - scrollContainer.clientWidth;
            if (maxScroll <= 0) return;

            const scrollRatio = scrollContainer.scrollLeft / maxScroll;
            const maxThumbPosition =
              scrollTrack.clientWidth - thumb.clientWidth;
            thumb.style.left = scrollRatio * maxThumbPosition + "px";
          }

          // Evento de scroll del contenedor
          scrollContainer.addEventListener("scroll", updateThumbPosition);

          // Eventos del thumb
          thumb.addEventListener("mousedown", startDrag);
          thumb.addEventListener("touchstart", startDrag, { passive: false });

          // Evento del track (clic directo en la pista)
          scrollTrack.addEventListener("click", (e) => {
            if (e.target === scrollTrack) {
              const rect = scrollTrack.getBoundingClientRect();
              const clickX = e.clientX - rect.left;
              const scrollRatio = clickX / scrollTrack.clientWidth;
              const maxScroll =
                scrollContainer.scrollWidth - scrollContainer.clientWidth;
              scrollContainer.scrollLeft = scrollRatio * maxScroll;
            }
          });

          function startDrag(e) {
            isDragging = true;
            startX = e.type === "mousedown" ? e.clientX : e.touches[0].clientX;
            scrollLeft = scrollContainer.scrollLeft;

            document.addEventListener("mousemove", onDrag);
            document.addEventListener("mouseup", stopDrag);
            document.addEventListener("touchmove", onDrag, { passive: false });
            document.addEventListener("touchend", stopDrag);

            e.preventDefault();
          }

          function onDrag(e) {
            if (!isDragging) return;

            const currentX =
              e.type === "mousemove" ? e.clientX : e.touches[0].clientX;
            const deltaX = currentX - startX;
            const scrollRatio = deltaX / scrollTrack.clientWidth;
            const maxScroll =
              scrollContainer.scrollWidth - scrollContainer.clientWidth;

            scrollContainer.scrollLeft = scrollLeft + scrollRatio * maxScroll;

            e.preventDefault();
          }

          function stopDrag() {
            isDragging = false;
            document.removeEventListener("mousemove", onDrag);
            document.removeEventListener("mouseup", stopDrag);
            document.removeEventListener("touchmove", onDrag);
            document.removeEventListener("touchend", stopDrag);
          }

          // Inicializar posici√≥n despu√©s de un breve delay
          setTimeout(updateThumbPosition, 100);
        });
      }

      // Inicializar cuando el DOM est√© listo
      document.addEventListener("DOMContentLoaded", () => {
        initScrollControls();
      });

      // Re-inicializar controles despu√©s de cargar contenido din√°mico
      function reinitScrollControls() {
        setTimeout(() => {
          initScrollControls();
        }, 100);
      }
    </script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
    <script src="app.js" type="module"></script>
  
<!-- Modal de Pedir Drama -->
<div id="modal-pedir-drama" class="hidden">
  <div class="chat-container">
    <button class="cerrar-chat" id="cerrar-pedir-drama">‚úï</button>

    <!-- Login si no est√° autenticado -->
    <div id="pedir-drama-login" class="chat-login">
      <h3>Inicia sesi√≥n para pedir</h3>
      <input type="text" id="usuario-pedir" placeholder="Usuario" />
      <input type="password" id="clave-pedir" placeholder="Contrase√±a" />
      <button id="btn-login-pedir">Entrar</button>
      <p id="error-pedir" style="color:red;display:none;">Error al autenticar</p>
    </div>

    <!-- Formulario para petici√≥n -->
<div id="formulario-pedir" class="hidden">
  <div id="lista-peticiones" class="chat-mensajes"></div>

  <form id="form-pedir-drama">
    <input type="text" id="titulo-pedido" placeholder="T√≠tulo del drama" required />

    <input type="file" id="imagen-pedido" accept="image/*" required />

    <img id="preview-pedido" src="" alt="Vista previa" style="display: none;" />

    <button type="submit">Enviar Petici√≥n</button>
  </form>
</div>

</body>
</html>
